<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>Chat</title>

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
:root {
  --bg:#111b21;
  --hdr:#202c33;
  --chat:#0b141a;
  --sent:#005c4b;
  --rcv:#202c33;
  --txt:#e9edef;
  --sub:#8696a0;
  --acc:#00a884;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif;user-select:none;touch-action:pan-y;}
html,body{height:100vh;width:100%;overflow:hidden;position:fixed;background:var(--bg);display:flex;flex-direction:column;}

.phone-container {
  width:100%;
  height:100vh;
  max-width:450px;
  margin:auto;
  background:var(--chat);
  display:flex;
  flex-direction:column;
  position:relative;
}

header {
  background:var(--hdr);
  padding:10px 14px;
  display:flex;
  align-items:center;
  color:var(--txt);
}

.avatar {
  width:40px;height:40px;border-radius:50%;
  background:var(--acc);
  display:flex;align-items:center;justify-content:center;
  font-weight:600;color:#fff;margin-right:12px;
}

.user-info h4 { font-size:16px; font-weight:500; }
#status-text { font-size:12px; color:var(--sub); }

.chat-area {
  flex:1;
  padding:18px 14px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:9px;
  scrollbar-width:none;
}
.chat-area::-webkit-scrollbar { display:none; }

.message {
  padding:8px 12px;
  border-radius:9px;
  font-size:14px;
  line-height:1.4;
  color:var(--txt);
  animation:fadeIn .26s ease;
  box-shadow:0 1px .5px rgba(0,0,0,0.15);
  max-width:72%;
}

.sent { background:var(--sent); align-self:flex-end; border-top-right-radius:2px; }
.received { background:var(--rcv); align-self:flex-start; border-top-left-radius:2px; }
.timestamp { display:block; text-align:right; font-size:10px; color:rgba(255,255,255,0.5); margin-top:3px; }

.input-area {
  background:var(--hdr);
  padding:10px;
  display:flex;
  align-items:center;
  border-top:1px solid rgba(255,255,255,0.08);
}

.goto-btn {
  width:100%;
  padding:12px;
  background:var(--acc);
  color:#fff;
  font-size:14px;
  font-weight:600;
  border:none;
  cursor:pointer;
  text-align:center;
  margin-top:12px;
}
.goto-btn:active{transform:scale(0.95);}


input { flex:1; padding:11px 14px; border-radius:20px; border:none; outline:none; background:#2a3942; color:var(--txt); font-size:15px; }
.send-btn-icon { width:40px;height:40px;border-radius:50%;border:none;background:var(--acc);color:white;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center; }
.send-btn-icon:active { transform:scale(.88); }

@keyframes fadeIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:none;}}
</style>
</head>
<body>

<div class="phone-container">
  <header>
    <div class="avatar">M</div>
    <div class="user-info">
      <h4>loosu meow</h4>
      <p id="status-text">online</p>
    </div>
  </header>

  <div class="chat-area" id="chatArea">
    <div class="message received">ðŸŒ™ Type your nameâ€¦</div>
  </div>

  <div class="input-area">
    <input id="msgInput" type="text" placeholder="Message..." autocomplete="off">
    <button id="sendBtn" class="send-btn-icon">âž¤</button>
  </div>
</div>

<!-- hidden music tag -->
<audio id="bg-music" loop preload="auto" style="display:none">
  <source src="songs/perfect.mp3" type="audio/mpeg">
</audio>

<script src="audio.js"></script>

<script>
const redirectPath = "cake.html";
const music = document.getElementById("bg-music");
const chatArea = document.getElementById("chatArea");
const input = document.getElementById("msgInput");
const sendBtn = document.getElementById("sendBtn");

function getTime(){
  return (new Date()).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
}

function addMsg(t,type){
  const div = document.createElement("div");
  div.className = "message " + type;
  div.innerHTML = t + `<span class="timestamp">${getTime()}</span>`;
  chatArea.appendChild(div);
  chatArea.scrollTop = chatArea.scrollHeight;
}

function spawnBtn(){
  const btn = document.createElement("button");
  btn.className = "send-btn-icon"; 
  btn.style.marginTop = "12px";
  btn.textContent = "ðŸŽ‚";
  btn.onclick = () => window.location.href = redirectPath;
  chatArea.appendChild(btn);
}

// main send action
sendBtn.onclick = () => {
  const t = input.value.trim();
  if(!t) return;

  addMsg(t,"sent");

  setTimeout(()=>{
    addMsg(`
You made silence beautiful too.  
Stillâ€¦ happiest birthday, moon girl ðŸŒ™âœ¨  
May your world glow gently.  
Bye, take care â¤ï¸  
Assalamualaikum ðŸŒ™âœ¨
    `,"received");
  },700);

  setTimeout(()=>{
    spawnBtn();
  },1400);

  input.value="";

  if(music){
    music.muted=false;
    music.volume=0.6;
    music.play().catch(()=>{});
  }
};

input.addEventListener("keypress",e=>{
  if(e.key==="Enter") sendBtn.click();
});
</script>

</body>
</html>
